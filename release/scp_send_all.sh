#!/bin/sh
user="root"
pwd="NOR4myself!"
ips=(
"47.106.169.130" "47.106.203.89" "47.106.178.60" "39.108.180.93" "120.78.182.47" "39.108.93.255" "39.108.113.107" "47.106.203.100" "47.106.15.113" "119.23.250.109" "47.106.94.81" "120.79.131.124" "47.106.181.175" "120.79.95.171" "47.106.191.65" "47.106.78.243" "47.106.178.110" "47.106.101.125" "120.79.71.214" "47.106.101.43" "47.106.108.48" "120.79.129.137" "39.108.181.133" "120.79.218.184" "47.106.187.67" "120.78.178.241" "47.106.12.151" "120.79.182.121" "47.106.167.80" "39.108.114.184" "39.108.127.105" "120.79.193.169" "120.79.143.214" "120.79.166.139" "120.77.45.189" "39.108.111.231" "120.79.199.22" "120.79.133.219" "47.106.96.72" "120.78.221.5" "47.106.186.86" "47.106.181.64" "47.106.73.62" "119.23.252.149" "47.106.95.138" "47.106.112.115" "47.106.164.196" "39.108.187.24" "47.106.165.144" "47.106.104.251" "120.79.92.127" "120.79.197.131" "47.106.87.106" "120.79.128.45" "47.106.169.29" "47.106.203.181" "47.106.183.146" "39.108.230.67" "47.106.101.203" "47.106.163.173" "47.106.121.63" "47.106.183.29" "47.106.167.71" "47.106.117.225" "47.106.101.103" "47.106.89.232" "47.106.106.28" "47.106.189.21" "47.106.125.69" "120.79.128.42" "47.106.10.253" "120.79.194.58" "47.106.182.223" "120.79.8.80" "47.106.191.42" "47.106.126.19" "47.106.116.145" "47.106.12.4" "47.106.86.207" "47.106.101.2" "47.106.178.23" "47.106.118.31" "120.77.222.105" "120.79.30.32" "47.106.113.7" "47.106.112.48" "39.108.60.36" "47.106.164.120" "120.79.167.137" "47.106.188.186" "39.108.188.195" "120.78.190.223" "47.106.116.21" "120.79.174.229" "47.106.117.162" "120.77.244.19" "120.79.11.6" "120.78.205.85" "119.23.64.121" "47.106.11.188" "47.106.100.49" "120.78.216.109" "47.106.163.201" "120.79.17.103" "120.79.144.150" "120.77.170.151" "120.77.222.234" "120.78.199.34" "39.108.110.193" "119.23.66.199" "112.74.36.161" "39.108.62.67"
)
port=22
target=/root/
sendf=./shardSimulator/
Njob=10
for ip in ${ips[*]}
do
    {
	/usr/bin/expect<<-EOF   #shell中使用expect
	set timeout 90
	spawn scp -r -P $port $sendf $user@$ip:$target
	expect {
        "yes/no" {send "yes\r"}
        "password" {send "$pwd\r"}
    }
	expect {
        "yes/no" {send "yes\r"}
        "password" {send "$pwd\r"}
    }
    expect EOF
	EOF
    }
done

echo "success"
